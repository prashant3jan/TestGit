package com.struts2.action;

import java.util.List;

import com.opensymphony.xwork2.ActionSupport;

public class LoanAction extends ActionSupport {
	private static final long serialVersionUID = 2L;
	private LoanManager loanManager;
	private MemberManager memberManager;
	private CustomerLoanDetails loanBean;
	private List<CustomerLoanDetails> loanList;
	private List<Document> documentList;
	private List<Collateral>collList;
	private List<LoanDocs> documents;
	private List<CollateralGvn> collGvnList;
	private String loanAccno; 
	
	public LoanAction(){
		loanManager = new LoanManager();
		memberManager = new MemberManager();
		//collList = loanManager.listColl();
		
	}
	
	public String showLoanForm(){
		System.out.println("before colllist");
		collList = loanManager.listColl();
		System.out.println("after colllist");
		loanList = loanManager.loanList();
		System.out.println("after listdocs");
		documentList = memberManager.listDocs();
		return "success";
	}
	
	public String add(){
		System.out.println("mem_num"+loanBean.getMember().getMemNum());
		//member.getMemNum());
		try{
			loanManager.add(loanBean);
			}catch(Exception e){
				e.printStackTrace();
			}
			this.loanList = loanManager.loanList();
			collList = loanManager.listColl();
			documentList = memberManager.listDocs();
			return "success";
		}
	
	public String loanDelete(){
		try{
		loanManager.delete(loanAccno);
		}catch(Exception e){
			e.printStackTrace();
		}
		this.loanList = loanManager.loanList();
		collList = loanManager.listColl();
		documentList = memberManager.listDocs();
		return "success";
	}
	
	public List<Collateral> getCollList() {
		return collList;
	}

	public void setCollList(List<Collateral> collList) {
		this.collList = collList;
	}

	

	public List<Document> getDocumentList() {
		return documentList;
	}

	public void setDocumentList(List<Document> documentList) {
		this.documentList = documentList;
	}

	public List<CustomerLoanDetails> getLoanList() {
		return loanList;
	}

	public void setLoanList(List<CustomerLoanDetails> loanList) {
		this.loanList = loanList;
	}

	public CustomerLoanDetails getLoanBean() {
		return loanBean;
	}

	public void setLoanBean(CustomerLoanDetails loanBean) {
		this.loanBean = loanBean;
	}

	public List<LoanDocs> getDocuments() {
		return documents;
	}

	public void setDocuments(List<LoanDocs> documents) {
		this.documents = documents;
	}

	public List<CollateralGvn> getCollGvnList() {
		return collGvnList;
	}

	public void setCollGvnList(List<CollateralGvn> collGvnList) {
		this.collGvnList = collGvnList;
	}

	public String getLoanAccno() {
		return loanAccno;
	}

	public void setLoanAccno(String loanAccno) {
		this.loanAccno = loanAccno;
	}

}
